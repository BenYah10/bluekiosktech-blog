<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Titre & description (remplis dynamiquement plus bas) -->
  <title id="postTitleTag">Article â€” BlueKioskTech</title>
  <meta name="description" id="postDescTag" content="Article du blog BlueKioskTech." />

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/main.css" />

  <!-- Canonical & alternates (renseignÃ©s via JS) -->
  <link rel="canonical" href="" id="canonicalLink" />
  <link rel="alternate" hreflang="fr" href="" id="altFr" />
  <link rel="alternate" hreflang="en" href="" id="altEn" />
  <link rel="alternate" hreflang="x-default" href="" id="altX" />

  <!-- Open Graph / Twitter (renseignÃ©s via JS) -->
  <meta property="og:type" content="article" />
  <meta property="og:title" content="" id="ogTitle" />
  <meta property="og:description" content="" id="ogDesc" />
  <meta property="og:url" content="" id="ogUrl" />
  <meta property="og:image" content="https://www.bluekiosktech.blog/assets/images/og-blog.jpg" id="ogImage" />
  <meta name="twitter:card" content="summary_large_image" />
</head>
<body class="theme-light">
  <!-- HEADER -->
  <header class="site-header">
    <div class="container row between center">
      <a class="logo" href="index.html">
        <img src="assets/images/logo-blog.svg" alt="Bluekiosktech" />
        <span class="sr-only">Bluekiosktech.blog</span>
      </a>

      <nav id="nav" class="nav">
        <a href="index.html" data-i18n="nav_home">Accueil</a>
        <a href="blog.html" class="active" data-i18n="nav_blog">Articles</a>
        <a href="about.html" data-i18n="nav_about">Ã€ propos</a>
        <a href="contact.html" data-i18n="nav_contact">Contact</a>
      </nav>

      <div class="actions">
        <button id="themeToggle" aria-label="Basculer le thÃ¨me">ðŸŒ“</button>
        <button id="menuToggle" class="only-mobile" aria-label="Menu" type="button">â˜°</button>
      </div>

      <div class="lang-switch lang--header" aria-label="Language switch">
        <button id="lang-fr" class="is-active" aria-pressed="true">FR</button>
        <button id="lang-en" aria-pressed="false">EN</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Contenu de lâ€™article -->
    <article id="article" class="article card">
      <div class="meta" id="postMeta"></div>
      <h1 id="postTitle"></h1>
      <div id="postContent"></div>
    </article>

    <!-- Aside -->
    <aside class="post-aside">
      <div class="card">
        <h3 data-i18n="cta_pilote_title">Devenir site pilote</h3>
        <p data-i18n="cta_pilote_desc">IntÃ©ressÃ© par un pilote dans votre gym/bureau/campus ?</p>
        <p>
          <a class="btn" href="contact.html" data-i18n="cta_contact">Nous contacter</a>
        </p>
      </div>

      <div class="card">
        <h3 data-i18n="cta_feedback_title">Vos retours</h3>
        <p data-i18n="cta_feedback_desc">Vos retours nous aident Ã  amÃ©liorer le produit.</p>
        <p>
          <a class="btn" href="https://forms.gle/" target="_blank" rel="noopener" data-i18n="cta_feedback">Donner votre avis</a>
        </p>
      </div>
    </aside>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container row between">
      <p>Â© <span id="year"></span> Bluekiosktech.
        <span data-i18n="footer_copy">Tous droits rÃ©servÃ©s.</span>
      </p>
      <p><a href="privacy.html" data-i18n="footer_privacy">Politique de confidentialitÃ©</a></p>
    </div>
  </footer>

  <!-- Scripts (ordre important) -->
  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/data.js"></script>
  <script src="assets/js/render.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- SEO runtime: canonical, og:url, hreflang, JSON-LD BlogPosting -->
  <script>
  (function () {
    var u = new URL(location.href);
    var id = u.searchParams.get('id') || '';
    var lang = (u.searchParams.get('lang') || 'fr').toLowerCase();
    if (!['fr','en'].includes(lang)) lang = 'fr';

    // <html lang=â€¦>
    document.documentElement.setAttribute('lang', lang);

    // Compose canonical URL with params
    var canon = location.origin + location.pathname +
      (id ? ('?id=' + encodeURIComponent(id) + '&lang=' + lang) : '');

    // Helpers
    function abs(url) {
      if (!url) return '';
      return /^https?:\/\//i.test(url) ? url : (location.origin + (url[0] === '/' ? url : '/' + url));
    }
    function setAttr(sel, attr, val) {
      var el = document.querySelector(sel);
      if (!el) { el = document.createElement(sel.startsWith('meta') ? 'meta' : 'link'); 
        if (sel.startsWith('meta')) { var m = sel.match(/property="([^"]+)"/); if (m) el.setAttribute('property', m[1]); }
        document.head.appendChild(el);
      }
      el.setAttribute(attr, val);
      return el;
    }

    // Canonical + alternates
    document.getElementById('canonicalLink').setAttribute('href', canon);
    document.getElementById('altFr').setAttribute('href', location.origin + location.pathname + (id ? ('?id=' + encodeURIComponent(id) + '&lang=fr') : ''));
    document.getElementById('altEn').setAttribute('href', location.origin + location.pathname + (id ? ('?id=' + encodeURIComponent(id) + '&lang=en') : ''));
    document.getElementById('altX').setAttribute('href', canon);

    // Pick the post from data.js
    var postsFR = window.POSTS_FR || [];
    var postsEN = window.POSTS_EN || [];
    var posts = (lang === 'en' ? postsEN : postsFR);
    var post = posts.find(function (p) { return p.id === id; }) || {};

    // Title / Description
    var title = (post.title ? post.title : 'Article') + ' â€” BlueKioskTech';
    var desc = post.description || post.excerpt || 'Article du blog BlueKioskTech.';
    var datePub = post.date || new Date().toISOString().slice(0,10);
    var image = abs(post.image || post.cover || 'assets/images/og-blog.jpg');

    // Inject into <head>
    document.getElementById('postTitleTag').textContent = title;
    document.getElementById('postDescTag').setAttribute('content', desc);

    document.getElementById('ogTitle').setAttribute('content', title);
    document.getElementById('ogDesc').setAttribute('content', desc);
    document.getElementById('ogUrl').setAttribute('content', canon);
    document.getElementById('ogImage').setAttribute('content', image);

    // Also reflect in visible H1/meta if needed (render.js gÃ¨re le contenu, ceci est un fallback)
    var h1 = document.getElementById('postTitle');
    if (h1 && !h1.textContent.trim() && post.title) h1.textContent = post.title;
    var metaDiv = document.getElementById('postMeta');
    if (metaDiv && !metaDiv.textContent.trim()) metaDiv.textContent = datePub;

    // JSON-LD BlogPosting
    var ld = {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": post.title || "Article",
      "inLanguage": lang,
      "image": [ image ],
      "datePublished": datePub,
      "dateModified": datePub,
      "author": { "@type": "Organization", "name": "BlueKioskTech" },
      "publisher": { "@type": "Organization", "name": "BlueKioskTech" },
      "mainEntityOfPage": { "@type": "WebPage", "@id": canon }
    };
    var s = document.createElement('script');
    s.type = 'application/ld+json';
    s.text = JSON.stringify(ld);
    document.head.appendChild(s);
  })();
  </script>
</body>
</html>
